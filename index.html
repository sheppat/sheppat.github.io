<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>UsefulUtilities — Home</title>
<link rel="stylesheet" href="styles.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<body>
<canvas id="particle-canvas" class="particle-canvas" aria-hidden="true"></canvas>

<div id="ui" class="ui">
<header class="topbar">
  <div class="brand">
    <img src="images/robloxav.png" alt="avatar" class="avatar" />
    <div class="brand-text">
      <div class="brand-title">UsefulUtilities</div>
      <div class="brand-sub">Nicholas — Oshawa, Canada</div>
    </div>
  </div>
  <nav class="nav">
    <a href="index.html" class="nav-link active">Home</a>
    <a href="games.html" class="nav-link">Games</a>
    <a href="about.html" class="nav-link">About</a>
    <a href="legal.html" class="nav-link">Legal</a>
  </nav>
</header>

<main>
<section class="hero cinematic">
  <div class="hero-inner">
    <h1 class="hero-title">Explore. Play. Enjoy.</h1>
    <p class="hero-sub">UsefulUtilities brings you fun Roblox experiences and stats-driven tools for players.</p>
    <div class="hero-cta">
      <a class="btn btn-primary" href="games.html">View Games</a>
      <a class="btn btn-ghost" href="https://www.roblox.com/users/77313055/profile" target="_blank">Follow on Roblox</a>
    </div>
  </div>
  <div class="neon-layer neon-1" aria-hidden="true"></div>
  <div class="neon-layer neon-2" aria-hidden="true"></div>
  <div class="neon-layer neon-3" aria-hidden="true"></div>
</section>

<section class="features">
  <div class="container">
    <h2 class="section-title">Our Studio</h2>
    <div class="feature-grid">
      <article class="feature-card tilt">
        <h3>Dynamic Games</h3>
        <p>New experiences added frequently. Explore, play, and enjoy multiple Roblox games.</p>
      </article>
      <article class="feature-card tilt">
        <h3>Community Focus</h3>
        <p>Feedback-driven development. We build tools and games to help the community thrive.</p>
      </article>
      <article class="feature-card tilt">
        <h3>SSO & Stats</h3>
        <p>Track stats and analytics for your favorite Roblox games seamlessly.</p>
      </article>
    </div>
  </div>
</section>

<section class="preview">
  <div class="container">
    <h2 class="section-title">Games</h2>
    <div id="home-preview" class="preview-grid"></div>
  </div>
</section>

<section class="footer-cta">
  <div class="container">
    <p>Have suggestions or want to advertise? Email <a href="mailto:usefulutilities.shop@gmail.com">usefulutilities.shop@gmail.com</a></p>
  </div>
</section>
</main>

<footer class="site-footer">
  <div>© 2025 UsefulUtilities • Built by Nicholas • <a href="https://www.roblox.com/users/77313055/profile" target="_blank">Roblox</a></div>
</footer>
</div>

<script src="script.js" defer></script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAkUvQQ8qZhSikmSJrsKMHmg6X6gU_gH3U",
  authDomain: "usefulutilities-47455.firebaseapp.com",
  databaseURL: "https://usefulutilities-47455-default-rtdb.firebaseio.com",
  projectId: "usefulutilities-47455",
  storageBucket: "usefulutilities-47455.appspot.com",
  messagingSenderId: "911397695865",
  appId: "1:911397695865:web:454d4df194d2d9295d7fa8"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const previewContainer = document.getElementById('home-preview');

const gamesRef = ref(db, 'games/');
onValue(gamesRef, snapshot => {
  const data = snapshot.val() || {};
  previewContainer.innerHTML = '';
  const games = Object.values(data);

  games.slice(0,3).forEach(game => {
    const card = document.createElement('div');
    card.className = 'game-preview card-3d tilt';
    card.onclick = () => window.open(game.url || '#', '_blank');

    let imgSrc = game.img || '';
    if (!imgSrc.startsWith('http')) {
      imgSrc = `images/${imgSrc}`;
    }

    card.innerHTML = `
      <img src="${escapeHtml(imgSrc)}" alt="${escapeHtml(game.name || '')}" />
      <div class="preview-meta">
        <h3>${escapeHtml(game.name || '')}</h3>
        <p>${escapeHtml(game.desc || '')}</p>
      </div>
    `;
    previewContainer.appendChild(card);
  });

  if (window.gsap && window.initTilt) initTilt();
}, err => console.error('Firebase read failed:', err));

function escapeHtml(s = '') {
  return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[c]);
}
</script>

</body>
</html>

